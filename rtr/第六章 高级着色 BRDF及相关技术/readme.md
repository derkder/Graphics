## 渲染公式
![渲染方程式](/rtr/第六章%20高级着色%20BRDF及相关技术/imgs/渲染方程式.png)


## BRDF
#### 简介
BRDF是一个用来描述表面如何反射光线得方程，可以近似的求出每束光线对一个给定了材质属性的平面上最终反射出来的光线所作出的贡献程度。  
也就是描述光如何从给定得两个方向（入射光方向l和出射方向v）在表面进行反射的函数。  
#### 公式
![渲染方程式](/rtr/第六章%20高级着色%20BRDF及相关技术/imgs/BRDF方程式.png)
#### 另外
讲辐射度量学和渲染方程和路径追踪的超牛的链接：  
https://zhuanlan.zhihu.com/p/370162390  
https://learnopengl-cn.github.io/07%20PBR/01%20Theory/  
#### 其中的反射公式说明
好像blinn-phong就是brdf模型反射方程的一种


## PBR的基本流程：
1. 定义材质属性
在PBR中，每个材质都有一些基本属性，如反射率（albedo）、粗糙度（roughness）、金属度（metallic）、法线贴图（normal map）和环境光遮蔽（ambient occlusion）等。这些属性可以通过纹理贴图或手动设置来定义。
2. 计算光照
在PBR中，光照计算基于物理原理，以模拟真实光照。通常使用Cook-Torrance BRDF模型（也称为Microfacet模型）来计算光照。该模型考虑了光线的入射角、材质的粗糙度和金属度等因素，以计算出反射光的颜色和强度。
3. 计算间接光照
除了直接光照外，PBR还可以计算间接光照。这可以通过全局光照计算、光线跟踪或球谐函数来实现。在计算间接光照时，需要考虑材质的反射率和环境光遮蔽等因素。
4. 合成最终颜色
最后，将直接光照、间接光照和材质属性等信息合成为最终的颜色值。这可以通过将这些信息加权平均、逐像素混合等方式来实现。
